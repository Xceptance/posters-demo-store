<#import "../layout/defaultview.ftl.html" as layout>
<@layout.myLayout "Backoffice User">
    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <div class="content-header">
            <div class="container-fluid">
                <div class="row mb-2">
                    <div class="col-sm-6">
                        <h1 class="m-0">${i18n("updatePaymentTitle")}</h1>
                    </div><!-- /.col -->
                    <div class="col-sm-6">
                        <ol class="breadcrumb float-sm-right">
                            <li class="breadcrumb-item"><a href="#">Home</a></li>
                            <li class="breadcrumb-item active">${i18n("updatePaymentTitle")}</li>
                        </ol>
                    </div><!-- /.col -->
                </div><!-- /.row -->
            </div><!-- /.container-fluid -->
        </div>
        <!-- /.content-header -->

        <!-- Main content -->
        <div class="content">
            <div class="container-fluid">
                <div class="row justify-content-center">
                    <div class="col-md-6">
                        <div class="card card-secondary">
                            <div class="card-header">
                                <h3 class="card-title">${i18n("updatePaymentTitle")}</h3>
                            </div>
                            <!-- /.card-header -->
                            <div class="card-body">
                                <form action="${contextPath}/posters/backoffice/customer/${customer.id}/payment-edit-complete" method="post">
                                    <input name="creditCardId" id="addressId" type="hidden" value=${creditInfo.id}>
                                    <div class="mb-3">
                                        <label for="creditCardNumber">${i18n("titleNumber")}*</label>
                                        <input id="creditCardNumber" class="form-control" name="creditCardNumber"
                                            title="${i18n('errorWrongCreditCard')}"
                                            type="text" placeholder="${i18n('titleNumber')}"
                                            pattern="4[0-9]{12}(?:[0-9]{3})?"
                                            data-error="${i18n('errorWrongCreditCard')}"
                                            value="${(creditInfo.cardNumber)!}" size="16" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="name">${i18n("paymentCardholderName")}*</label>
                                        <input id="name" class="form-control" name="name" type="text"
                                            title="${i18n('errorWrongName')}" placeholder="${i18n('paymentCardholderName')}"
                                            pattern="${regexName}" data-error="${i18n('errorWrongName')}"
                                            value="${(creditInfo.name)!}" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="expirationDateMonth">${i18n('paymentExpiration')}*</label>
                                        <div class="row">
                                            <div class="col-xs-6 col-sm-6 col-md-6">
                                                <select id="expirationDateMonth" name="expirationDateMonth" class="form-control" title="${i18n('paymentExpiration')}">
                                                    <#list 1..9 as i>
                                                    <#if creditInfo??>
                                                        <#if (creditInfo.month == i)>
                                                        <option selected="selected">0${i}</option>
                                                        <#else>
                                                        <option>0${i}</option>
                                                        </#if>
                                                    <#else>
                                                        <#if (currentMonth == i)>
                                                        <option selected="selected">0${i}</option>
                                                        <#else>
                                                        <option>0${i}</option>
                                                        </#if>
                                                    </#if>
                                                    </#list>
                                                    <#list 10..12 as i>
                                                    <#if creditInfo??>
                                                        <#if (creditInfo.month == i)>
                                                        <option selected="selected">${i}</option>
                                                        <#else>
                                                        <option>${i}</option>
                                                        </#if>
                                                    <#else>
                                                        <#if (currentMonth == i)>
                                                        <option selected="selected">${i}</option>
                                                        <#else>
                                                        <option>${i}</option>
                                                        </#if>
                                                    </#if>
                                                    </#list>
                                                </select>
                                            </div>
                                            <div class="col-xs-6 col-sm-6 col-md-6">
                                                <select id="expirationDateYear" name="expirationDateYear" class="form-control" title="${i18n('paymentExpiration')}">
                                                    <#list expirationDateStartYear..(expirationDateStartYear+10) as i>
                                                    <#if creditInfo??>
                                                        <#if (creditInfo.year == i)>
                                                        <option selected="selected">${i}</option>
                                                        <#else>
                                                        <option>${i}</option>
                                                        </#if>
                                                    <#else>
                                                        <#if (currentYear == i)>
                                                        <option selected="selected">${i}</option>
                                                        <#else>
                                                        <option>${i}</option>
                                                        </#if>
                                                    </#if>
                                                    </#list>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                            </div>
                            <div class="card-footer">
                                    <button type="submit" class="btn btn-sm btn-primary">${i18n("confirm")}</button>
                                    <button type="button" class="btn btn btn-sm btn-secondary" onclick="javascript:history.back()"> ${i18n("back")} </button>
                            </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- /.content -->
    </div>
    <!-- /.content-wrapper -->
</@layout.myLayout>
