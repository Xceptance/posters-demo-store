<#import "../layout/defaultviewN.ftl.html" as layout>
<@layout.myLayout "Edit Product ${product.name}">
    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <div class="content-header">
            <div class="container-fluid">
                <div class="row mb-2">
                    <div class="col-sm-6">
                        <h1 class="m-0">Edit Product ${product.name}</h1>
                    </div>
                    <!-- /.col -->
                    <div class="col-sm-6">
                        <ol class="breadcrumb float-sm-right">
                            <li class="breadcrumb-item"><a href="#">Home</a></li>
                            <li class="breadcrumb-item"><a href="/posters/backoffice/product">Product</a></li>
                            <li class="breadcrumb-item active">Edit</li>
                        </ol>
                    </div>
                    <!-- /.col -->
                </div>
                <!-- /.row -->
            </div>
            <!-- /.container-fluid -->
        </div>
        <!-- /.content-header -->

        <!-- Main content -->
        <div class="content">
            <div class="container-fluid">
                <div class="row ">
                    <div class="col-md-12">
                        <div class="card card-secondary">
                            <div class="card-header">
                                <h3 class="card-title">Edit Product ${product.name}</h3>
                            </div>
                            <!-- /.card-header -->
                            <div class="card-body">
                                <form action="${contextPath}/posters/backoffice/product/${product.id}" method="post">
                                    <div class="mb-3">
                                        <label for="name" class="form-label">Name</label>
                                        <input type="text" class="form-control" id="name" name="name" aria-describedby="emailHelp"
                                            value="${product.name}">
                                    </div>
                                    <div class="mb-3">
                                        <label for="imageURL" class="form-label">Image URL</label>
                                        <input type="text" class="form-control" id="imageURL" name="imageURL" value="${product.imageURL}">
                                    </div>
                                    <div class="mb-3">
                                        <label for="minimumPrice" class="form-label">Minimum Price</label>
                                        <input type="text" class="form-control" id="minimumPrice" name="minimumPrice"
                                            value="${product.minimumPrice}">
                                    </div>
                                    <div class="mb-3">
                                        <label for="descriptionOverview" class="form-label">Description Overview</label>
                                        <input type="text" class="form-control" id="descriptionOverview" name="descriptionOverview"
                                            value="${product.descriptionOverview}">
                                    </div>

                                    <!-- Size start -->
                                    <div class="mb-3">
                                        <label for="" class="form-label">Sizes</label>
                                        <#list availableSizes as availableSize>
                                            <#assign found = false>
                                            <div class="form-check">
                                                <#list product.availableSizes as posterSize>
                                                    <#if posterSize.size.id == availableSize.id>
                                                        <input class="form-check-input" type="checkbox" value="${availableSize.id}" name="availableSizes" checked>
                                                        <label class="form-check-label" for="">
                                                            ${availableSize.width} x ${availableSize.height}
                                                        </label>
                                                        <#assign found = true>
                                                    </#if>
                                                </#list>
                                                <#if found == false>
                                                    <input class="form-check-input" type="checkbox" value="${availableSize.id}" name="availableSizes">
                                                    <label class="form-check-label" for="">
                                                        ${availableSize.width} x ${availableSize.height}
                                                    </label>
                                                </#if>
                                            </div>
                                        </#list>
                                    </div>
                                    <!-- Size end -->

                                    <div class="form-floating mb-3">
                                        <select class="form-select custom-select" id="subcategories" aria-label="Floating label select subcategories"
                                            name="subCategory">
                                            <#list subCategories as subCategory>
                                                <option value="${subCategory.name}" <#if product.subCategory.name == subCategory.name>selected</#if>>${subCategory.name}</option>
                                            </#list>
                                        </select>
                                        <label for="subcategories">Subcategories</label>
                                    </div>

                                    <div class="form-floating mb-3">
                                        <select class="form-select custom-select" id="topcategories" aria-label="Floating label select topcategories"
                                            name="topCategory">
                                            <#list topCategories as topCategory>
                                                <option value="${topCategory.name}" <#if product.topCategory.name == topCategory.name>selected</#if>>${topCategory.name}</option>
                                            </#list>
                                        </select>
                                        <label for="topcategories">Topcategories</label>
                                    </div>

                                    <div class="mb-3">
                                        <label for="descriptionDetail">Detailed Description</label>
                                        <textarea class="form-control" placeholder="Leave a detailed description here"
                                            id="descriptionDetail" style="height: 150px;"
                                            name="descriptionDetail">${product.descriptionDetail}</textarea>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Confirm</button>
                                </form>
                            </div>
                            <!-- /.card-body -->
                        </div>
                        <!-- /.card -->
                    </div>
                </div>
                <!-- /.row -->
            </div>
            <!-- /.container-fluid -->
        </div>
        <!-- /.content -->
    </div>
    <!-- /.content-wrapper -->
</@layout.myLayout>
