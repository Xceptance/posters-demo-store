<#include "../layout/upper.ftl.html">

    <div class="bg-light rounded p-4 pt-4 mx-4 my-4">
        <div class="bg-light rounded h-100 p-4">
            <h2 class="mb-4">Customer View</h2>
            <div class="row align-items-center">
                <div class="col">
                    <p>Select an address to edit.</p>
                </div>
                <div class="col text-end">                    
                        <button type="button" onclick="window.location.href=''" data-bs-toggle="tooltip" data-bs-placement="top" title="Reset Selections" class="btn btn-sm-square btn-outline-secondary m-2">
                            <i class="fa fa-undo"></i>
                        </button>
                </div>
            </div>
            
            
            <form action="/posters/backoffice/customer/${customer.id}/view/edit" method="post">
                <div class="table-responsive">
                    <table id="" class="table display text-start align-middle table-bordered table-hover mb-0">
                        <thead>
                            <tr class="text-dark">
                                <th width="10%" scope="col">Name</th>
                                <th width="30%" scope="col">Shipping Address</th>
                                <th width="30%" scope="col">Billing Address</th>
                                <th width="28%" scope="col">Payment Info</th>
    
                                <th width="2%"scope="col">Orders</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td valign="top">${customer.firstName} ${customer.name}</td>

                                <!--Shipping Address Info-->

                                <td valign="top">
                                    <div class="row">
                                        <#if customer.shippingAddress?has_content>
                                            <#list customer.shippingAddress as shippingAddress>
                                                <div class="col-lg-8">
                                                    <fieldset class="row mb-3">
                                                        <legend class="col-form-label col-sm-2 pt-0">${shippingAddress_index +1}</legend>
                                                        <div class="col-sm-10">
                                                            <div class="form-check">
                                                                <input class="form-check-input" type="radio" name="gridRadiosShip" 
                                                                    id="gridRadiosShip${shippingAddress_index + 1}" data-shipId=""
                                                                    value="${shippingAddress.id}">
                                                                
                                                                <label class="form-check-label"
                                                                    for="gridRadiosShip${shippingAddress_index + 1}">
                                                                    <address>
                                                                        ${shippingAddress.name},
                                                                        ${shippingAddress.company}, <br>
                                                                        ${shippingAddress.addressLine},<br>
                                                                        ${shippingAddress.zip}
                                                                        ${shippingAddress.state},  ${shippingAddress.city}, ${shippingAddress.country}
                                                                    </address>
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </fieldset>
                                                </div>
                                                
                                                <div class="col-lg-2">
                                                    <div class="col-xs-12 col-sm-3 text-center mb-3">
                                                        <!-- Each delete button should have its own form -->
                                                        <form action="${contextPath}/posters/backoffice/customer/${customer.id}/del-ship-address" method="post">
                                                            <input name="addressIdShip" class="" type="hidden" value="${shippingAddress.id}">
                                                            <button type="submit" class="btn btn-sm-square btn-outline-danger m-2"><i class="fa fa-trash-alt"></i></button>
                                                        </form>
                                                    </div>
                                                </div>
                                                <div class="col-lg-2">
                                                    <div class="col-xs-12 col-sm-3 text-center mb-3">
                                                        <!-- Each edit button should have its own form -->
                                                        <form action="${contextPath}/posters/backoffice/customer/${customer.id}/edit-ship-address" method="post">
                                                            <input name="addressIdShip" class="" type="hidden" value="${shippingAddress.id}">
                                                            <button type="submit" class="btn btn-sm-square btn-outline-primary m-2"><i class="fa fa-pencil-alt"></i></button>
                                                        </form>
                                                    </div>
                                                </div>
                                            </#list>
                                        <#else>
                                            NA
                                        </#if>
                                    </div>
                                </td>
                                
                                <!--Billing Address Info-->

                                <td valign="top">
                                    <div class="row">
                                    <#if customer.billingAddress?has_content>
                                        <#list customer.billingAddress as billingAddress>
                                        <div class="col-lg-8">
                                            <fieldset class="row mb-3">
                                                <legend class="col-form-label col-sm-2 pt-0">${billingAddress_index + 1}
                                                </legend>
                                                <div class="col-sm-10">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" name="gridRadiosBill"
                                                            id="gridRadiosBill${billingAddress_index + 1}"
                                                            value="${billingAddress.id}">
                                                        <label class="form-check-label"
                                                            for="gridRadiosBill${billingAddress_index + 1}">
                                                            <address>
                                                                ${billingAddress.name},
                                                                ${billingAddress.company}, <br>
                                                                ${billingAddress.addressLine},<br>
                                                                ${billingAddress.zip}
                                                                ${billingAddress.state},  ${billingAddress.city}, ${billingAddress.country}
                                                            </address>
                                                        </label>
                                                    </div>
                                                </div>
                                            </fieldset>
                                        </div>
                                        <div class="col-lg-2">
                                            <div class="col-xs-12 col-sm-3 text-center mb-3">
                                                <!-- Each delete button should have its own form -->
                                                <form action="${contextPath}/posters/backoffice/customer/${customer.id}/del-bill-address" method="post">
                                                    <input name="addressIdBill" class="" type="hidden" value="${billingAddress.id}">
                                                    <button type="submit" class="btn btn-sm-square btn-outline-danger m-2"><i class="fa fa-trash-alt"></i></button>
                                                </form>
                                            </div>
                                        </div>
                                        <div class="col-lg-2">
                                            <div class="col-xs-12 col-sm-3 text-center mb-3">
                                                <!-- Each edit button should have its own form -->
                                                <form action="${contextPath}/posters/backoffice/customer/${customer.id}/edit-bill-address" method="post">
                                                    <input name="addressIdBill" class="" type="hidden" value="${billingAddress.id}">
                                                    <button type="submit" class="btn btn-sm-square btn-outline-primary m-2"><i class="fa fa-pencil-alt"></i></button>
                                                </form>
                                            </div>
                                        </div>

                                        
                                        </#list>
                                        <#else>
                                            NA
                                    </#if>
                                </div>
                                </td>

                                <!-- Credit Card/Payment Info -->
                                <td valign="top">
                                    <div class="row">
                                        <#if customer.creditCard?has_content>
                                            <#list customer.getCreditCard() as creditCard>
                                                <div class="col-lg-8">
                                                    <fieldset class="row mb-3">
                                                        <legend class="col-form-label col-sm-2 pt-0">${creditCard_index + 1}</legend>
                                                        <div class="col-sm-10">
                                                            <div class="">
                                                                <label class="form-check-label">
                                                                    ${creditCard.getCardNumberCryptic()}
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </fieldset>
                                                </div>
                                                <div class="col-lg-2">
                                                    <div class="col-xs-12 col-sm-3 text-center mb-3">
                                                        <!-- Each delete button should have its own form -->
                                                        <form action="${contextPath}/posters/backoffice/customer/${customer.id}/del-payment-info" method="post">
                                                            <input name="creditCardId" class="" type="hidden" value="${creditCard.id}">
                                                            <button type="submit" class="btn btn-sm-square btn-outline-danger m-2"><i class="fa fa-trash-alt"></i></button>
                                                        </form>
                                                    </div>
                                                </div>
                                                <div class="col-lg-2">
                                                    <div class="col-xs-12 col-sm-3 text-center mb-3">
                                                        <!-- Each edit button should have its own form -->
                                                        <form action="${contextPath}/posters/backoffice/customer/${customer.id}/edit-payment-info" method="post">
                                                            <input name="creditCardId" class="" type="hidden" value="${creditCard.id}">
                                                            <button type="submit" class="btn btn-sm-square btn-outline-primary m-2"><i class="fa fa-pencil-alt"></i></button>
                                                        </form>
                                                    </div>
                                                </div>
                                            </#list>
                                        <#else>
                                            No credit card
                                        </#if>
                                    </div>
                                </td>

                                <!-- Order Info -->
                                <td valign="top">
                                    <#if customer.order?has_content>
                                        <a href="/posters/backoffice/customer/${customer.id}/view/orders"> <button
                                                type="button" class="btn btn-sm-square btn-outline-info m-2">
                                                <i class="fa fa-shopping-bag"></i></a></button>
    
                                        <#else>
                                            <a href="/posters/backoffice/customer/${customer.id}/view/orders"
                                                class="btn btn-square btn-outline-secondary m-2">
                                                <i class="fa fa-shopping-bag"></i>
                                            </a>
                                    </#if>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <br>
                <div>
                    <a class="btn btn-sm btn-secondary" href="/posters/backoffice/customer">Back</a>
                    <button type="submit" class="btn btn-sm btn-primary">Edit</button>

                </div>
           
            </form>
        </div>
    </div>


    <#include "../layout/footer.ftl.html">