<#import "../layout/defaultLayoutWebShop.ftl.html" as layout>
<@layout.myLayout "The ultimate webshop">

<div class="container">
	<h2>Cart</h2>
	<table class="table">
		<thead>
		  	<tr>
				<th scope="col">#</th>
				<th scope="col">${i18n("cartTableHeaderItem")}</th>
				<th scope="col">${i18n("cartTableHeaderUnitPrice")}</th>
				<th scope="col">${i18n("cartTableHeaderQuantity")}</th>
				<th scope="col">${i18n("cartTableHeaderTotalUnitPrice")}</th>
				<th scope="col"></th>
		  	</tr>
		</thead>
		<tbody>
		  	<#list cartProducts as cartProduct>
			<tr>
				<th scope="row">${cartProduct?counter}</th>
				<td>
					<div class="row">
						<div class="col">
							<img src="${contextPath}${cartProduct.product.imageURL}" class="img-thumbnail" alt="image of ${cartProduct.product.name}">
						</div>
						<div class="col">
							<h3>${cartProduct.product.name}</h3>
							<div>${i18n("cartStyle")}: <span>${cartProduct.finish}</span></div>
							<div>${i18n("cartSize")}: <span>${cartProduct.size.width} x ${cartProduct.size.height} ${unitLength}</span></div>
						</div>
					</div>
				</td>
				<td>${currency}${cartProduct.getPriceAsString()}</td>
				<td>${cartProduct.productCount}</td>
				<td>${currency}${cartProduct.getTotalUnitPriceAsString()}</td>
				<td>
					<button class="btn" id="btnUpdateProdCount${cartProduct_index}" title="${i18n('buttonUpdate')}" data-id="${cartProduct.id}" data-index="${cartProduct_index}"><span class="icon-refresh-ccw"></span></button>
					<button class="btn" id="btnRemoveProdCount${cartProduct_index}" title="${i18n('buttonRemove')}" data-id="${cartProduct.id}" data-toggle="modal" data-target="#deleteProductModal"><span class="icon-cross"></span></button>
				</td>
			</tr>
			</#list>
		</tbody>
	</table>
	<div class="price-summary-row">
		<ol class="list-group list-group-flush">
			<li class="list-group-item d-flex justify-content-between align-items-end">
			  <div class="price-summary ms-auto me-2">
				<div class="fw-bold">${i18n("cartSummary")}</div>
				<div class="row">
					<div class="col price-summary-position">${i18n("checkoutOverviewSubTotal")}:</div>
					<div class="col price-summary-value">${currency}${subOrderTotal}</div>
				</div>
				<div class="row">
					<div class="col price-summary-position">${i18n("checkoutOverviewShippingCosts")}:</div>
					<div class="col price-summary-value">${currency}${shippingCosts}</div>
				</div>
				<div class="row">
					<div class="col price-summary-position">${i18n("checkoutOvervieSubTotalTax")} (${tax}%):</div>
					<div class="col price-summary-value">${currency}${subOrderTotalTax}</div>
				</div>
			  </div>
			</li>
			<li class="list-group-item d-flex justify-content-between align-items-end">
			  <div class="price-summary ms-auto me-2">
				<div class="row">
					<div class="col fw-bold price-summary-position">${i18n("cartOverviewTotalPrice")}:</div>
					<div class="col fw-bold price-summary-value">${currency}${orderTotal}</div>
				</div>
			  </div>
			</li>
		</ol>
	</div>
	<div class="d-flex justify-content-end mt-2">
		<a id="btn-start-checkout" class="btn btn-primary me-0 ms-auto" href="${applUrlHttps}/checkout">${i18n("cartOverviewStartCheckout")}</a>
	</div>
</div>

<!-- Delete Product Modal -->
<div id="deleteProductModal" class="modal fade" role="dialog">
	<div class="modal-dialog modal-sm">
		<div class="modal-content">
			<div class="modal-header">
				<h4 class="modal-title">Are you sure you want to remove this product?</h4>
				<button type="button" class="close" data-dismiss="modal">Ã—</button>
			</div>		
			<div class="modal-footer">
				<div class="d-flex justify-content-start flex-wrap">
					<button id="buttonClose" type="button" class="btn btn-default" data-dismiss="modal" title="Close">No</button>
					<button id="buttonDelete" name="buttonDelete" class="btn btn-danger mt-2 mt-md-0" data-dismiss="modal" title="Delete">Yes</button>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="gototop js-top">
	<a href="#" class="js-gotop"><i class="icon-arrow-up2"></i></a>
</div>

</@layout.myLayout>
