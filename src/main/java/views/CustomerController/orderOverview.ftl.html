<#import "../layout/defaultLayoutWebShop.ftl.html" as layout>
    <@layout.myLayout "The ultimate webshop">

<div class="row">
    <div class="col-lg-12">
        <div class="container">
            <div class="colorlib-product h2fwpr">

                <div class="col-md-10 offset-md-1">
                    <div id="titleOrderHistory" class="header-container">
                        <span class="h2">${i18n("titleOrderHistory")}</span>
                    </div>
                    <div id="orderOverview">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">${i18n("orderOverviewTabHeadPurchasedPoster")}</th>
                                    <th scope="col">${i18n("orderOverviewTabHeadOrderDetails")}</th>
                                    <th scope="col">${i18n("orderOverviewTabHeadPurchasedPosterQuantity")}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <#list orderOverview as order>
                                    <#list order.products as orderProduct>
                                        <#if orderProduct_index==0>
                                        <!-- Display both order and product details only for the first product of the order -->
                                            <tr>
                                                <th class="fs-4" scope="row">${order_index + 1}</th>
                                                <td>
                                                    <div class="row">
                                                        <div class="col">
                                                            <picture id="orderOverview-picture-${orderProduct.id}">
                                                                <source media="(max-width: 399px)" srcset="${contextPath}${orderProduct.product.smallImageURL}">
                                                                <source media="(max-width: 799px)" srcset="${contextPath}${orderProduct.product.mediumImageURL}">
                                                                <source media="(max-width: 1999px)" srcset="${contextPath}${orderProduct.product.largeImageURL}">
                                                                <img class="img-thumbnail" src="${contextPath}${orderProduct.product.originalImageURL}" alt="image of ${orderProduct.product.name}" >
                                                            </picture>
                                                        </div>
                                                        <div class="col">
                                                            <h3 class="pName">${orderProduct.product.name}</h3>
                                                            <div class="productStyle">${i18n("cartStyle")}: <span>${orderProduct.finish}</span></div>
                                                            <div class="productSize">${i18n("cartSize")}: <span>${orderProduct.size.width} x ${orderProduct.size.height} ${unitLength}</span></div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div id="order-details">
                                                        <div id="order-detail-date" class="fw-bold">${i18n("orderOverviewOrderDate")}</div>
                                                        <div id="order-detail-date-value">${order.orderDate}</div>
                                                        <div id="order-detail-total" class="fw-bold">${i18n("orderOverviewOrderTotal")}</div>
                                                        <div id="order-detail-total-value">${currency}${order.getTotalCostsAsString()}</div>
                                                    </div>
                                                </td>
                                                <td>${orderProduct.productCount}x</td>
                                            </tr>
                                        <#else>
                                        <!-- Display ONLY quantitiy for the subsequent products of the order -->
                                        <tr>
                                            <th scope="row"></th>
                                            <td>
                                                <div class="row">
                                                    <div class="col">
                                                        <picture id="orderOverview-picture-${orderProduct.id}">
                                                            <source media="(max-width: 399px)" srcset="${contextPath}${orderProduct.product.smallImageURL}">
                                                            <source media="(max-width: 799px)" srcset="${contextPath}${orderProduct.product.mediumImageURL}">
                                                            <source media="(max-width: 1999px)" srcset="${contextPath}${orderProduct.product.largeImageURL}">
                                                            <img class="img-thumbnail" src="${contextPath}${orderProduct.product.originalImageURL}" alt="image of ${orderProduct.product.name}" >
                                                        </picture>
                                                    </div>
                                                    <div class="col">
                                                        <h3 class="pName">${orderProduct.product.name}</h3>
                                                        <div class="productStyle">${i18n("cartStyle")}: <span>${orderProduct.finish}</span></div>
                                                        <div class="productSize">${i18n("cartSize")}: <span>${orderProduct.size.width} x ${orderProduct.size.height} ${unitLength}</span></div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div id="order-details">
                                                    
                                                </div>
                                            </td>
                                            <td>${orderProduct.productCount}x</td>
                                        </tr>
                                        </#if>    
                                    </#list>
                                </#list>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                
            </div>

        </div>

    </div>

</div>

    

    </@layout.myLayout>