<?xml version="1.0" encoding="UTF-8"?>
<testcase xmlns="http://xlt.xceptance.com/xlt-script/2" version="4" baseURL="http://localhost:8080">
  <description>Simulates browsing the catalog and adding product to cart.</description>
  <module name="module.OpenHomepage"/>
  <module name="module.AddToCart"/>
  <module name="module.VerifyCartItem">
    <parameter name="index" value="0"/>
    <parameter name="productName" value="${productName}"/>
    <parameter name="productCount" value="1"/>
  </module>
  <command name="storeText" target="id=totalPrice" value="totalPrice"/>
  <module name="module.VerifyCartOverview">
    <parameter name="productCount" value="1"/>
    <parameter name="totalPrice" value="${totalPrice}"/>
  </module>
  <module name="module.AddToCart"/>
  <module name="module.VerifyCartItem">
    <parameter name="index" value="0"/>
    <parameter name="productName" value="${productName}"/>
    <parameter name="productCount" value="1"/>
  </module>
  <command name="storeText" target="id=totalPrice" value="totalPrice"/>
  <module name="module.VerifyCartOverview">
    <parameter name="productCount" value="2"/>
    <parameter name="totalPrice" value="${totalPrice}"/>
  </module>
  <action name="UpdateProductCount"/>
  <command name="type" target="css=.productCount0" value="3"/>
  <command name="clickAndWait" target="id=btnUpdateProdCount0"/>
  <command name="assertValue" target="css=.productCount0" value="3"/>
  <command name="storeText" target="id=totalPrice" value="totalPrice"/>
  <module name="module.VerifyCartOverview">
    <parameter name="productCount" value="4"/>
    <parameter name="totalPrice" value="${totalPrice}"/>
  </module>
  <action name="RemoveProduct"/>
  <command name="clickAndWait" target="id=btnRemoveProduct1"/>
  <command name="assertNotElementPresent" target="id=productName1"/>
  <command name="assertValue" target="css=.productCount0" value="3"/>
  <command name="storeText" target="id=totalPrice" value="totalPrice"/>
  <module name="module.VerifyCartOverview">
    <parameter name="productCount" value="3"/>
    <parameter name="totalPrice" value="${totalPrice}"/>
  </module>
  <action name="ShowProductOfCart"/>
  <command name="storeText" target="id=productName0" value="productName"/>
  <command name="clickAndWait" target="//*[@id='product0']//img"/>
  <command name="assertText" target="id=titleProductName" value="${productName}"/>
  <action name="AddSameProduct"/>
  <command name="clickAndWait" target="id=btnAddToCart"/>
  <module name="module.VerifyCartItem">
    <parameter name="index" value="0"/>
    <parameter name="productName" value="${productName}"/>
    <parameter name="productCount" value="4"/>
  </module>
  <command name="storeText" target="id=totalPrice" value="totalPrice"/>
  <module name="module.VerifyCartOverview">
    <parameter name="productCount" value="4"/>
    <parameter name="totalPrice" value="${totalPrice}"/>
  </module>
</testcase>