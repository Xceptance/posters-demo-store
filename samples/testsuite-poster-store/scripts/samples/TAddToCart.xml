<?xml version="1.0" encoding="UTF-8" ?>
<testcase version="3" baseURL="http://localhost:8080" xmlns="http://xlt.xceptance.com/xlt-script/2">
  <description>Simulates browsing the catalog and adding product to cart.</description>
  <module name="module.OpenHomepage"/>
  <module name="module.AddToCart">
    <parameter name="idSubCategory" value="33"/>
    <parameter name="idProduct" value="1"/>
  </module>
  <module name="module.VerifyCart">
    <parameter name="priority" value="0"/>
    <parameter name="productName" value="${productName}"/>
    <parameter name="productCount" value="1"/>
  </module>
  <command name="assertText" target="id=btnBasketOverview" value="regexp:.*1.*"/>
  <module name="module.AddToCart">
    <parameter name="idSubCategory" value="10"/>
    <parameter name="idProduct" value="0"/>
  </module>
  <module name="module.VerifyCart">
    <parameter name="priority" value="1"/>
    <parameter name="productName" value="${productName}"/>
    <parameter name="productCount" value="1"/>
  </module>
  <command name="assertText" target="id=btnBasketOverview" value="regexp:.*2.*"/>
  <action name="UpdateProductCount"/>
  <command name="type" target="css=.productCount0" value="3"/>
  <command name="clickAndWait" target="id=btnUpdateProdCount0"/>
  <command name="assertValue" target="css=.productCount0" value="3"/>
  <command name="storeText" target="id=totalPrice" value="totalPrice"/>
  <command name="assertText" target="id=btnBasketOverview" value="regexp:.*4.*${totalPrice}"/>
  <action name="RemoveProduct"/>
  <command name="clickAndWait" target="id=btnRemoveProduct1"/>
  <command name="assertNotElementPresent" target="id=productName1"/>
  <command name="assertValue" target="css=.productCount0" value="3"/>
  <command name="storeText" target="id=totalPrice" value="totalPrice"/>
  <command name="assertText" target="id=btnBasketOverview" value="regexp:.*3.*${totalPrice}"/>
  <action name="ShowProductOfCart"/>
  <command name="storeText" target="id=productName0" value="productName"/>
  <command name="clickAndWait" target="//*[@id='product0']//img"/>
  <command name="assertText" target="id=titleProductName" value="${productName}"/>
  <action name="AddSameProduct"/>
  <command name="clickAndWait" target="id=btnAddToCart"/>
  <command name="assertValue" target="css=.productCount0" value="4"/>
  <command name="storeText" target="id=totalPrice" value="totalPrice"/>
  <command name="assertText" target="id=btnBasketOverview" value="regexp:.*4.*${totalPrice}"/>
</testcase>
