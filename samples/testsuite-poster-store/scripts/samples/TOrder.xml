<?xml version="1.0" encoding="UTF-8"?>
<testcase xmlns="http://xlt.xceptance.com/xlt-script/2" version="4" baseURL="http://localhost:8080">
  <description>Simulates browsing the catalog, adding product(s) to the cart, checkout as registered customer and place the order.</description>
  <module name="module.OpenHomepage"/>
  <module name="module.Login">
    <parameter name="email" value="${email}"/>
    <parameter name="password" value="${password}"/>
    <parameter name="firstName" value="${firstName}"/>
  </module>
  <module name="module.AddToCart"/>
  <action name="StartCheckout"/>
  <command name="clickAndWait" target="id=btnStartCheckout"/>
  <action name="SelectShippingAddress"/>
  <command name="assertElementPresent" target="id=titleDelAddr"/>
  <command name="assertElementPresent" target="id=delAddr0"/>
  <command name="clickAndWait" target="id=btnUseDelAddress0"/>
  <action name="SelectBillingAddress"/>
  <command name="assertElementPresent" target="id=titleBillAddr"/>
  <command name="assertElementPresent" target="id=billAddr0"/>
  <command name="clickAndWait" target="id=btnUseBillAddress0"/>
  <action name="SelectPaymentMethod"/>
  <command name="assertElementPresent" target="id=titlePayment"/>
  <command name="assertElementPresent" target="id=payment0"/>
  <command name="clickAndWait" target="id=btnUsePayment0"/>
  <action name="Order"/>
  <module name="module.VerifyOrderOverview">
    <parameter name="priority" value="0"/>
    <parameter name="productName" value="${productName}"/>
    <parameter name="productCount" value="1"/>
  </module>
  <module name="module.VerifyAddressAndPaymentOfOrder">
    <parameter name="fullName" value="${fullName}"/>
    <parameter name="company" value="${company}"/>
    <parameter name="address" value="${address}"/>
    <parameter name="city" value="${city}"/>
    <parameter name="state" value="${state}"/>
    <parameter name="zip" value="${zip}"/>
    <parameter name="country" value="${country}"/>
    <parameter name="creditCard" value="${creditCardCryptic}"/>
    <parameter name="expDateMonth" value="${expDateMonth}"/>
    <parameter name="expDateYear" value="${expDateYear}"/>
  </module>
  <command name="clickAndWait" target="id=btnOrder"/>
  <command name="assertElementPresent" target="id=successMessage"/>
  <command name="assertText" target="id=btnBasketOverview" value="regexp:.*0.*0.*"/>
  <module name="module.OpenAccountOverview"/>
  <action name="ViewOrderOverview"/>
  <command name="clickAndWait" target="id=linkOrderOverview"/>
  <command name="assertElementPresent" target="id=titleOrderHistory"/>
  <command name="assertText" target="//div[@id='orderOverview']/descendant::table[last()]/*/tr/td[2]" value="${productName}"/>
  <command name="assertText" target="//div[@id='orderOverview']/descendant::table[last()]/*/tr/td[4]" value="1x"/>
</testcase>