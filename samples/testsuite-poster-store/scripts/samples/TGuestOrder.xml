<?xml version="1.0" encoding="UTF-8" ?>
<testcase version="3" baseURL="http://localhost:8080" xmlns="http://xlt.xceptance.com/xlt-script/2">
  <description>Simulates browsing the catalog, adding product(s) to the cart and checkout as guest without final order placement.</description>
  <module name="module.OpenHomepage"/>
  <action name="Browse-0"/>
  <command name="storeText" target="//*[@id='topCategory2']/a" value="topCat2Name"/>
  <command name="clickAndWait" target="//*[@id='topCategory2']/a"/>
  <command name="assertText" target="id=titleCategoryName" value="${topCat2Name}"/>
  <command name="storeText" target="id=product2Name" value="prod1Name"/>
  <command name="clickAndWait" target="//*[@id='product2']//img"/>
  <command name="assertText" target="id=titleProductName" value="${prod1Name}"/>
  <action name="AddToCart-0"/>
  <command name="clickAndWait" target="id=btnAddToCart"/>
  <command name="assertText" target="id=productName0" value="${prod1Name}"/>
  <command name="assertText" target="//*[@id='btnBasketOverview']/a" value="regexp:.*1.*"/>
  <action name="Browse-1"/>
  <command name="storeText" target="//*[@id='subCategory02']/a" value="subCat02Name"/>
  <command name="clickAndWait" target="//*[@id='subCategory02']/a"/>
  <command name="assertText" target="id=titleCategoryName" value="${subCat02Name}"/>
  <command name="storeText" target="id=product0Name" value="prod2Name"/>
  <command name="clickAndWait" target="//*[@id='product0']//img"/>
  <command name="assertText" target="id=titleProductName" value="${prod2Name}"/>
  <action name="AddToCart-1"/>
  <command name="clickAndWait" target="id=btnAddToCart"/>
  <command name="assertText" target="id=productName1" value="${prod2Name}"/>
  <command name="assertText" target="//*[@id='btnBasketOverview']/a" value="regexp:.*2.*"/>
  <action name="StartCheckout"/>
  <command name="storeText" target="id=totalPrice" value="totalPrice"/>
  <command name="clickAndWait" target="id=btnStartCheckout"/>
  <action name="EnterShippingAddress"/>
  <command name="assertElementPresent" target="id=titleDelAddr"/>
  <module name="module.FillInAddressForm">
    <parameter name="name" value="${fullName}"/>
    <parameter name="company" value="${company}"/>
    <parameter name="address" value="${address}"/>
    <parameter name="city" value="${city}"/>
    <parameter name="state" value="${state}"/>
    <parameter name="zip" value="${zip}"/>
    <parameter name="country" value="${country}"/>
  </module>
  <command name="check" target="id=billEqualShipp-No"/>
  <command name="clickAndWait" target="id=btnAddDelAddr"/>
  <action name="EnterBillingAddress"/>
  <command name="assertElementPresent" target="id=titleBillAddr"/>
  <module name="module.FillInAddressForm">
    <parameter name="name" value="${fullName}"/>
    <parameter name="company" value="${company}"/>
    <parameter name="address" value="${address}"/>
    <parameter name="city" value="${city}"/>
    <parameter name="state" value="${state}"/>
    <parameter name="zip" value="${zip}"/>
    <parameter name="country" value="${country}"/>
  </module>
  <command name="clickAndWait" target="id=btnAddBillAddr"/>
  <action name="EnterPaymentMethod"/>
  <command name="assertElementPresent" target="id=titlePayment"/>
  <module name="module.FillInPaymentForm">
    <parameter name="number" value="${creditCard}"/>
    <parameter name="name" value="${fullName}"/>
    <parameter name="month" value="${expDateMonth}"/>
    <parameter name="year" value="${expDateYear}"/>
  </module>
  <command name="clickAndWait" target="id=btnAddPayment"/>
  <action name="OrderOverview"/>
  <command name="assertElementPresent" target="id=titleOrderOverview"/>
  <command name="assertElementPresent" target="id=product0"/>
  <command name="assertElementPresent" target="id=product1"/>
  <command name="assertNotElementPresent" target="id=product2"/>
  <command name="assertText" target="id=product0Name" value="${prod1Name}"/>
  <command name="assertText" target="id=product0Count" value="1"/>
  <command name="assertText" target="id=product1Name" value="${prod2Name}"/>
  <command name="assertText" target="id=product1Count" value="1"/>
  <command name="assertText" target="id=delAddr" value="regexp:${fullName}.*${company}.*${address}.*${city}, ${state} ${zip}.*${country}"/>
  <command name="assertText" target="id=billAddr" value="regexp:${fullName}.*${company}.*${address}.*${city}, ${state} ${zip}.*${country}"/>
  <command name="assertText" target="id=payment" value="regexp:.*${fullName}.*${creditCardCryptic}.*${expDateMonth} ${expDateYear}"/>
  <action name="Order"/>
  <command name="clickAndWait" target="id=btnOrder"/>
  <command name="assertElementPresent" target="id=successMessage"/>
</testcase>
