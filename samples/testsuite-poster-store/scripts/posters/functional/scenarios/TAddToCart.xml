<?xml version="1.0" encoding="UTF-8"?>
<testcase xmlns="http://xlt.xceptance.com/xlt-script/2" version="4" baseURL="http://localhost:8080">
  <description>Simulates browsing the catalog and adding product to cart.</description>
  <module name="posters.functional.modules.OpenHomepage"/>
  <module name="posters.functional.modules.AddToCart"/>
  <module name="posters.functional.modules.VerifyCartItem">
    <parameter name="index" value="0"/>
    <parameter name="productName" value="${productName}"/>
    <parameter name="productCount" value="1"/>
    <parameter name="productFinish" value="${productFinish}"/>
    <parameter name="productSize" value="${productSize}"/>
  </module>
  <command name="storeText" target="id=totalPrice" value="totalPrice"/>
  <module name="posters.functional.modules.VerifyCartSliderElement">
    <parameter name="index" value="1"/>
    <parameter name="productName" value="${productName}"/>
    <parameter name="productFinish" value="${productFinish}"/>
    <parameter name="productPrice" value="${productPrice}"/>
    <parameter name="productCount" value="1"/>
    <parameter name="productSize" value="${productSize}"/>
    <parameter name="totalPrice" value="${totalPrice}"/>
  </module>
  <module name="posters.functional.modules.VerifyCartOverview">
    <parameter name="productCount" value="1"/>
    <parameter name="totalPrice" value="${totalPrice}"/>
  </module>
  <module name="posters.functional.modules.AddToCart"/>
  <module name="posters.functional.modules.VerifyCartItem">
    <parameter name="index" value="0"/>
    <parameter name="productName" value="${productName}"/>
    <parameter name="productCount" value="1"/>
    <parameter name="productFinish" value="${productFinish}"/>
    <parameter name="productSize" value="${productSize}"/>
  </module>
  <command name="storeText" target="id=totalPrice" value="totalPrice"/>
  <module name="posters.functional.modules.VerifyCartSliderElement">
    <parameter name="index" value="1"/>
    <parameter name="productName" value="${productName}"/>
    <parameter name="productFinish" value="${productFinish}"/>
    <parameter name="productPrice" value="${productPrice}"/>
    <parameter name="productCount" value="1"/>
    <parameter name="productSize" value="${productSize}"/>
    <parameter name="totalPrice" value="${totalPrice}"/>
  </module>
  <module name="posters.functional.modules.VerifyCartOverview">
    <parameter name="productCount" value="2"/>
    <parameter name="totalPrice" value="${totalPrice}"/>
  </module>
  <action name="UpdateProductCount"/>
  <command name="type" target="css=.productCount0" value="3"/>
  <command name="storeText" target="id=totalPrice" value="oldTotalPrice"/>
  <command name="click" target="id=btnUpdateProdCount0"/>
  <command name="waitForNotText" target="id=totalPrice" value="${oldTotalPrice}"/>
  <command name="assertText" target="css=.productCount0" value="3"/>
  <command name="storeText" target="id=totalPrice" value="totalPrice"/>
  <module name="posters.functional.modules.VerifyCartSliderElement">
    <parameter name="index" value="1"/>
    <parameter name="productName" value="${productName}"/>
    <parameter name="productFinish" value="${productFinish}"/>
    <parameter name="productPrice" value="${productPrice}"/>
    <parameter name="productCount" value="3"/>
    <parameter name="productSize" value="${productSize}"/>
    <parameter name="totalPrice" value="${totalPrice}"/>
  </module>
  <module name="posters.functional.modules.VerifyCartOverview">
    <parameter name="productCount" value="4"/>
    <parameter name="totalPrice" value="${totalPrice}"/>
  </module>
  <action name="RemoveProduct"/>
  <command name="click" target="id=btnRemoveProduct1"/>
  <command name="waitForNotElementPresent" target="id=productName1"/>
  <command name="assertText" target="css=.productCount0" value="3"/>
  <command name="storeText" target="id=totalPrice" value="totalPrice"/>
  <module name="posters.functional.modules.VerifyCartOverview">
    <parameter name="productCount" value="3"/>
    <parameter name="totalPrice" value="${totalPrice}"/>
  </module>
  <action name="ShowProductOfCart"/>
  <command name="storeText" target="id=productName0" value="productName"/>
  <command name="storeText" target="id=productFinish0" value="productFinish"/>
  <command name="clickAndWait" target="//*[@id='product0']//img"/>
  <command name="assertText" target="id=titleProductName" value="${productName}"/>
  <action name="AddSameProduct"/>
  <command name="check" target="//div[@id='selectFinish']/label[${finishIndex}+1]/input"/>
  <command name="select" target="id=selectSize" value="label=${productSize}"/>
  <command name="click" target="id=btnAddToCart"/>
  <command name="waitForVisible" target="//ul[@id='cartSliderElementList']/li"/>
  <command name="waitForNotVisible" target="//ul[@id='cartSliderElementList']/li"/>
  <module name="posters.functional.modules.VerifyCartItem">
    <parameter name="index" value="0"/>
    <parameter name="productName" value="${productName}"/>
    <parameter name="productCount" value="4"/>
    <parameter name="productFinish" value="${productFinish}"/>
    <parameter name="productSize" value="${productSize}"/>
  </module>
  <command name="storeText" target="id=totalPrice" value="totalPrice"/>
  <module name="posters.functional.modules.VerifyCartSliderElement">
    <parameter name="index" value="1"/>
    <parameter name="productName" value="${productName}"/>
    <parameter name="productFinish" value="${productFinish}"/>
    <parameter name="productPrice" value="${productPrice}"/>
    <parameter name="productCount" value="4"/>
    <parameter name="productSize" value="${productSize}"/>
    <parameter name="totalPrice" value="${totalPrice}"/>
  </module>
  <module name="posters.functional.modules.VerifyCartOverview">
    <parameter name="productCount" value="4"/>
    <parameter name="totalPrice" value="${totalPrice}"/>
  </module>
</testcase>