<?xml version="1.0" encoding="UTF-8" ?>
<testcase version="3" baseURL="http://localhost:8080" xmlns="http://xlt.xceptance.com/xlt-script/2">
  <description>Simulates browsing the catalog, adding product(s) to the cart, log in and get one cart which includes the products added just now and the products of the customer's cart.</description>
  <module name="module.OpenHomepage"/>
  <module name="module.Login">
    <parameter name="email" value="${email}"/>
    <parameter name="password" value="${password}"/>
    <parameter name="firstName" value="${firstName}"/>
  </module>
  <action name="AddToCustomersCart"/>
  <command name="clickAndWait" target="//*[@id='subCategory11']/a"/>
  <command name="clickAndWait" target="//*[@id='product0']//img"/>
  <command name="clickAndWait" target="id=btnAddToCart"/>
  <command name="storeText" target="id=productName0" value="product1Name"/>
  <command name="assertText" target="//*[@id='btnBasketOverview']/a" value="regexp:.*1.*-.*"/>
  <module name="module.Logout"/>
  <action name="CheckCartIsEmpty"/>
  <command name="assertText" target="//*[@id='btnBasketOverview']/a" value="regexp:.*0.*-.*"/>
  <action name="AddToCart"/>
  <command name="clickAndWait" target="//*[@id='subCategory12']/a"/>
  <command name="clickAndWait" target="//*[@id='product0']//img"/>
  <command name="clickAndWait" target="id=btnAddToCart"/>
  <command name="storeText" target="id=productName0" value="product2Name"/>
  <command name="assertText" target="//*[@id='btnBasketOverview']/a" value="regexp:.*1.*-.*"/>
  <action name="AddProduct1Again"/>
  <command name="clickAndWait" target="//*[@id='subCategory11']/a"/>
  <command name="clickAndWait" target="//*[@id='product0']//img"/>
  <command name="clickAndWait" target="id=btnAddToCart"/>
  <command name="assertText" target="id=productName1" value="${product1Name}"/>
  <command name="assertText" target="//*[@id='btnBasketOverview']/a" value="regexp:.*2.*-.*"/>
  <module name="module.Login">
    <parameter name="email" value="${email}"/>
    <parameter name="password" value="${password}"/>
    <parameter name="firstName" value="${firstName}"/>
  </module>
  <action name="GetMergedCart"/>
  <command name="clickAndWait" target="//*[@id='btnBasketOverview']/a"/>
  <command name="assertText" target="id=productName0" value="${product1Name}"/>
  <command name="assertValue" target="//*[@id='formProdCount0']/input[@id='productCount']" value="2"/>
  <command name="assertText" target="id=productName1" value="${product2Name}"/>
  <command name="assertValue" target="//*[@id='formProdCount1']/input[@id='productCount']" value="1"/>
  <command name="assertText" target="//*[@id='btnBasketOverview']/a" value="regexp:.*3.*-.*"/>
  <action name="RemoveProductsFromCart"/>
  <command name="clickAndWait" target="id=btnRemoveProduct0"/>
  <command name="clickAndWait" target="id=btnRemoveProduct0"/>
  <command name="assertText" target="//*[@id='btnBasketOverview']/a" value="regexp:.*0.*-.*"/>
</testcase>
